ORG 1000H
EOI EQU 20H
IMR EQU 21H
INT1 EQU 25H

CONT EQU 10H
COMP EQU 11H

SEG DB 30H
FIN DB ? 

ORG 3000H
RUTINA: PUSH AX
INC SEG+1
CMP SEG+1, 3AH
JNZ RESET
MOV SEG+1, 30H
INC SEG
CMP SEG, 36H
JNZ RESET
MOV SEG, 30H

RESET:  INT 7
        MOV AL, 0
        OUT CONT, AL
        MOV AL, 20H
        OUT EOI, AL
        POP AX
        IRET
        
ORG 2000H
CLI

MOV AL, 11111101b
OUT IMR, AL

MOV AL, 20
OUT INT1, AL

MOV AL, 0
OUT CONT, AL

MOV AL, 59
OUT COMP, AL

MOV BX, OFFSET SEG
MOV AL, OFFSET FIN-OFFSET SEG

STI

CALL RUTINA
loop: JMP loop
